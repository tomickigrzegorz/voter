{"version":3,"file":"script.js","sources":["../sources/script.js"],"sourcesContent":["const app = document.querySelector('.app');\r\nconst local = process.env.WYBORNIK_LOCAL === 'TRUE' ? true : false;\r\nconst api = process.env.WYBORNIK_API;\r\nconst images = JSON.parse(localStorage.getItem('images'));\r\nconst localStorageExist = localStorage.getItem('images');\r\nconst tyleImages = process.env.WYBORNIK_TYPE_IMAGE;\r\nconst arrays = tyleImages.split(',');\r\n\r\nconst showImage = window.location.search === '?s=print' ? 'show' : '';\r\n\r\nasync function fetchData(url) {\r\n  try {\r\n    const response = await fetch(url);\r\n    const data = await response.json();\r\n    return local ? data : data.images;\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\nfetchData(api)\r\n  .then(data => addToSiteImages(data))\r\n  .then(setValueNumber)\r\n  .then(createButtonSendEmail)\r\n\r\n\r\nfunction sizeImages(image) {\r\n  return arrays.map(type => `\r\n    <div class=\"15-18\">\r\n      <label>${type}</label>\r\n      <input type=\"number\" name=\"${type}-${image}\" min=\"0\"> szt.\r\n    </div>`).join('')\r\n}\r\n\r\nconst template = (image) => {\r\n  const imgPath = local ? image : `images/${image}`;\r\n  const imageSize = sizeImages(image);\r\n  const temp = `\r\n    <div class=\"item\" data-image-name=\"${image}\">\r\n      <img loading=\"lazy\" class=\"img-zoom\" data-zoomed=\"false\" width=\"1600px\" height=\"1067px\" src=\"${imgPath}\">\r\n      <div class=\"number-images ${showImage}\">\r\n        <div class=\"image-name\">${image}</div>\r\n        ${imageSize}\r\n      </div>\r\n    </div>`;\r\n\r\n  return temp;\r\n}\r\n\r\n\r\n\r\nfunction addToSiteImages(data) {\r\n  data.map(item => {\r\n    app.insertAdjacentHTML('beforeend', template(item.image))\r\n  })\r\n};\r\n\r\nwindow.addEventListener('DOMContentLoaded', function () {\r\n  new Zooom('img-zoom', {\r\n    overlay: {\r\n      color: '#edebe7',\r\n      opacity: 90,\r\n    },\r\n  });\r\n\r\n  let arrayImages = localStorage.getItem('images') ? JSON.parse(localStorage.getItem('images')) : [];\r\n\r\n  document.addEventListener('change', (e) => {\r\n    if (e.target.type === 'number') {\r\n      const { name, value } = e.target;\r\n      const type = { name, value };\r\n\r\n      let item = arrayImages.find(img => img.name === name);\r\n\r\n      if (item) {\r\n        item.value = value;\r\n      } else {\r\n        arrayImages.push(type);\r\n      }\r\n    }\r\n\r\n    localStorage.setItem('images', JSON.stringify(arrayImages));\r\n  })\r\n\r\n  getAllInputsValue();\r\n\r\n});\r\n\r\nfunction getAllInputsValue() {\r\n  let imagesList = '';\r\n  document.addEventListener('click', (e) => {\r\n    if (e.target.classList.contains('send-email')) {\r\n      const inputs = document.querySelectorAll('input[type=\"number\"]');\r\n\r\n      inputs.forEach(input => {\r\n        if (input.value !== '' && input.value !== '0') {\r\n          const type = input.name.split('-')[0];\r\n          const name = input.name.split('-')[1];\r\n          imagesList += `${name} - ${type} | ${input.value} szt.` + '%20%0A';\r\n        }\r\n      });\r\n\r\n      if (imagesList.length > 0) {\r\n        sendEmail(imagesList);\r\n      }\r\n    }\r\n    imagesList = '';\r\n  })\r\n}\r\n\r\nfunction sendEmail(images) {\r\n  const mail = process.env.WYBORNIK_MAIL;\r\n  const mailtoLink = `mailto:${mail}?subject=Zdjęcia wybrane do druku&body=${images}`;\r\n  const win = window.open(mailtoLink, 'mail');\r\n  setTimeout(() => {\r\n    win.close();\r\n  }, 500);\r\n}\r\n\r\nfunction setValueNumber() {\r\n  if (!localStorageExist) return;\r\n\r\n  images.forEach(image => {\r\n    let element = document.querySelector(`input[name=\"${image.name}\"]`);\r\n    element.value = image.value;\r\n  });\r\n}\r\n\r\nfunction createButtonSendEmail() {\r\n  const button = document.createElement('button');\r\n  button.className += `send-email ${showImage}`;\r\n  button.textContent = 'wyślij maila'\r\n  app.insertAdjacentElement('beforeend', button);\r\n}\r\n"],"names":[],"mappings":"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"}